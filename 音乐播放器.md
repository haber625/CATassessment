# 音乐播放器

## audio 的对象属性

### 1、duration/currentTime/currentSrc

currentSrc返回当前音频的src

duration音频的时长

currentTime当前播放的位置

### 2、setInterval

可以每规定的毫秒数内调用函数，或者进行计算，返回值是一个id

直至停止clearInterval:可以获取setInterval返回的id作为clearInterval的 参数，







## audio的对象方法

### play()

play()	开始播放音频。

### pause()

pause()	暂停当前播放的音频。









## audio 属性（H5）

#### audio.play/.pause

控制暂停、播放

```js
aodio.play();
aodio.pause();
```

#### src

```js
<audio src="www.xxxxx/url?id=xxx">
```

#### controls

会显示播放器的控件

```js
<audio controls="controls">
```





## 获取播放时间与歌曲时长（00：00形式）

```js
//歌曲时间
//以每一秒为周期获取时间，避免秒出现小数
setInterval(function () {
    cur = parseInt(audioPlayer.currentTime);//当前秒数
    var temp = cur;
    minute = parseInt(temp / 60);//分钟，转化为分钟
    if (cur % 60 < 10) {
        currentTime.innerHTML = "" + minute + ":0" + cur % 60 + "";
    } else {
        currentTime.innerHTML = "" + minute + ":" + cur % 60 + "";
    }
}, 1000);

```

## 进度条

```js
//设置两个宽度一样的位置一样的盒子；其中一个随歌曲播放的时间而改变宽度
let lenth = audioPlayer.duration;
timer1 = setInterval(function () {
cur = audioPlayer.currentTime;//获取当前的播放时间
play_lineCur.style.width = "" + parseFloat(cur / lenth) * 300 + "px";
}, 50)//每50毫秒改变宽度

//停止
var int=self.setInterval(function(){},50)
onclick "int = window.clearInterval(int)";
```

## 下一首、上一首

```js
//通过遍历歌曲的src,获取当前的序列号，点击使序列号+1
former.onclick = function () {
    let now;
    //获取当前歌曲的序列号
    for (var i = 1; i < song.length; i++) {
        if (audioPlayer.src == "https://music.163.com/song/media/outer/url?id=" + song[i])
            now = i;
        if (audioPlayer.src == "https://music.163.com/song/media/outer/url?id=" + song[0])
            now = song.length;
    }
    // 歌曲信息更新
    audioPlayer.src = "https://music.163.com/song/media/outer/url?id=" + song[now - 1];//上一首，序列号减一
    audioPlayer.play();
    songName.innerHTML = songs[now - 1].songName;
    songSinger.innerHTML = songs[now - 1].singer;
}

//改进一下下：当歌曲多时不适合用遍历的方法去获取序列号，可以在添加歌曲的时候给每首歌添加index序列号；
//点击按钮后获取index，然后直接序列号为index+1的歌曲id
```

## 播放

```js
//通过判断暂停和播放的背景position不同来判断音频的暂停与播放
btns_play.onclick = function () {
    if (btns_play.style.backgroundPositionY == "-204px") {
        audioPlayer.play();
        btns_play.style.backgroundPositionY = "-165px";
    }
    else {
        audioPlayer.pause();
        btns_play.style.backgroundPositionY = "-204px";
    }
}
//有个缺点：当点击下一首时，歌曲可以自动切换，但是按钮不会改变，歌曲的总时长也没有发生改变
```

